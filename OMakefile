
USE_OCAMLFIND = true
NATIVE_ENABLED = true
BYTE_ENABLED = true

.PHONY: clean

.SUBDIRS: src/libs/ocaml-leveldb src/libs/extprot

OCAMLCFLAGS += -g
OCAMLFLAGS += -annot -thread
OCAMLFINDFLAGS += -syntax camlp4o
OCAMLOPTFLAGS += -inline 100

OCAMLPACKS[] = batteries lwt lwt.unix lwt.syntax

LD_PATHS[] =
	$(ROOT)/src/libs/ocaml-leveldb/src
	$(ROOT)/src

setenv(CAML_LD_LIBRARY_PATH, $(concat :, $(absname $(LD_PATHS))))

.SUBDIRS: src test

clean:
	rm -f $(filter-proper-targets $(ls R, .))
