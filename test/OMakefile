
OCAMLPACKS[] += unix threads oUnit

OCAMLFLAGS += -cclib -L$(ROOT)/src/libs/ocaml-leveldb/leveldb \
	      -cclib -L$(ROOT)/src/libs/ocaml-leveldb/src
OCAML_BYTE_LINK_FLAGS =

OCAMLINCLUDES += ../src

OCAML_LIBS[] +=
    ../src/libs/ocaml-leveldb/src/leveldb
    ../src/ostore

OCamlProgram(test, $(removesuffix $(ls test_*.ml)) test)
OCamlProgram(benchmark_storage, test_00util benchmark_storage)

.PHONY: test
test: test.opt
	./test.opt -verbose

.DEFAULT: test$(EXE) benchmark_storage$(EXE)
